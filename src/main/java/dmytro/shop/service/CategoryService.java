package dmytro.shop.service;import dmytro.shop.dto.request.CategoryRequest;import dmytro.shop.dto.response.CategoryResponse;import dmytro.shop.entiti.Category;import dmytro.shop.exception.WrongInputDataException;import dmytro.shop.repository.CategoryRepository;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.List;import java.util.stream.Collectors;@Servicepublic class CategoryService {    @Autowired    private CategoryRepository categoryRepository;    public CategoryResponse save (CategoryRequest categoryRequest) {        return new CategoryResponse(categoryRepository.save(categoryRequestToCategory(categoryRequest, null)));    }    public List<CategoryResponse> findAll() {        return categoryRepository.findAll().stream()                .map(CategoryResponse::new)                .collect(Collectors.toList());    }    public CategoryResponse update(CategoryRequest categoryRequest, Long id){        return new CategoryResponse(categoryRepository.save(categoryRequestToCategory(categoryRequest, findOne(id))));    }    public Category findOne(Long id) {        return categoryRepository.findById(id)                .orElseThrow(() -> new WrongInputDataException("Category with id " + id + "not exists"));    }    public void delete(Long id) {        categoryRepository.delete(findOne(id));    }    private Category categoryRequestToCategory(CategoryRequest categoryRequest, Category category) {        if ( category == null){            category = new Category();        }        category.setName(categoryRequest.getName());        return category;    }}